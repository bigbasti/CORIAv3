<div class="page-header">
    <h1>Dataset <small>{{$ctrl.dataset.name}}</small></h1>
</div>
<div class="row" ng-show="$ctrl.loading">
    <div class="col-md-4 col-md-offset-4">
        <span class="glyphicon glyphicon-time" aria-hidden="true"></span> <span>Loading DataSet, please wait...</span>
        <div class="progress">
            <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
        </div>
    </div>
</div>

<div class="row" ng-hide="$ctrl.loading">
    <div class="col-md-4">
        <div class="row" ng-hide="$ctrl.displayAddMetric === true">
            <div class="col-md-12">
                <h3>Available Metrics</h3>
                <p ng-repeat="metric in $ctrl.dataset.metricInfos">
                    <span class="label label-primary">{{metric.shortcut}}</span> <span>{{metric.name}}</span> <span class="label label-danger" ng-if="metric.executionFinished===null">IN PROGRESS</span>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <button class="btn btn-default btn-xs"  ng-click="$ctrl.displayAddMetric = true" ng-hide="$ctrl.displayAddMetric === true"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add Metric</button>
            </div>
        </div>
        <div class="row" ng-show="$ctrl.displayAddMetric === true">
            <div class="col-md-12">
                <div class="alert alert-info" role="alert" ng-bind-html="$ctrl.metric.description"></div>
                <form name="import" id="import" ng-submit="$ctrl.submitMetric()" >
                    <div class="form-group">
                        <label for="metric.providers">Select Metric</label>
                        <select class="form-control" ng-model="$ctrl.selectedMetric" id="metric.providers" ng-change="$ctrl.metricProviderSelected()">
                            <option ng-repeat="metric in $ctrl.metrics" value="{{metric.identification}}">{{metric.technology}} - {{metric.provider}} - {{metric.name}}</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-default" ng-hide="$ctrl.import.isActive" ng-disabled="$ctrl.metric.identification === undefined"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Start Metric Execution</button>
                    <button class="btn btn-default" ng-hide="$ctrl.import.isActive" ng-click="$ctrl.cancelAddMetric()"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Cancel</button>
                </form>
            </div>
        </div>
    </div>
</div>